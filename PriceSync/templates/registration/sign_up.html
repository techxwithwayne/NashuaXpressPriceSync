{% extends 'base.html' %}
{% block content %}
{% load static %}

<div class="page-header">
<div class="page-title">
<h4>Create New User Account</h4>
<h6>Create new account for access to NashuaXpress</h6>
</div>
</div>

{% if user_exist %}
<div class="container">
    <div class="notice notice-danger">
        <strong>{{ user_exist }}</strong>
    </div>
</div>
{% endif %}

{% if form_sub_success %}
<div class="container">
    <div class="notice notice-success">
        <strong>{{ form_sub_success }}</strong>
    </div>
</div>
{% endif %}

<div class="card">
<div class="card-body">
    <form class="was-validated" method="POST" enctype="multipart/form-data" id="myForm" onsubmit="return validateForm()">
        {% csrf_token %}
<div class="row">

    <!--
<div class="col-lg-3 col-sm-6 col-12">
<div class="form-group">
<label>First Name</label>
<input type="text" name="firstname" required>
</div>
</div>
<div class="col-lg-3 col-sm-6 col-12">
<div class="form-group">
<label>Last Name</label>
<input type="text" name="lastname" required>
</div>
</div>
<div class="col-lg-3 col-sm-6 col-12">
<div class="form-group">
<label>Username</label>
<input type="text" name="username" required>
</div>
</div>
<div class="col-lg-3 col-sm-6 col-12">
    <div class="form-group">
    <label>Email</label>
    <input type="email" class="form-control" name="email" required>
    </div>
    </div>
    <div class="col-lg-3 col-sm-6 col-12">
        <div class="form-group">
        <label>Mobile</label>
        <input type="text" id="mobile" name="mobile" placeholder="Enter a mobile number (e.g., +1234567890)" required>
        <div id="mobileError" style="color: red;"></div>
        </div>
        </div>
        <div class="col-lg-3 col-sm-6 col-12">
            <div class="form-group">
            <label>Job title</label>
            <input type="text" name="jobtitle" required>
            </div>
            </div>

            <div class="col-lg-3 col-sm-6 col-12">
                <div class="form-group">
                <label>Employee Status</label>
                <select class="form-control" name="emp_status" required>
                    <option value="Active">Active</option>
                    <option value="Inactive">Inactive</option>
                    <option value="On Leave">On Leave</option>
                    </select>
                </div>
                </div>
                <div class="col-lg-3 col-sm-6 col-12">
                    <div class="form-group">
                    <label>Date of Hire</label>
                    <input type="date" id="doh" class="form-control" name="doh" pattern="\d{4}-\d{2}-\d{2}" placeholder="YYYY-MM-DD" required>
                    </div>
                    </div>

                    <div class="col-lg-3 col-sm-6 col-12">
                        <div class="form-group">
                        <label>Department</label>
                        <select class="form-control" name="department" required>
                            <option value="">Choose Department</option>
                                    <option value="1">Human Resources</option>
                                    <option value="2">Finance</option>
                                    <option value="3">Sales</option>
                                    <option value="4">Information Technology</option>
                                    <option value="5">Production</option>
                                    <option value="6">Marketing</option>
                                    <option value="7">Customer Support</option>
                                    <option value="8">Research & Development</option>
                                    <option value="9">Administration</option>
                                    <option value="10">Purchasing</option>
                                    <option value="11">Operations</option>
                                    <option value="12">Logistics</option>
                            </select>
                        </div>
                        </div>

                        <div class="col-lg-3 col-sm-6 col-12">
                            <div class="form-group">
                            <label>Manager</label>
                            <select class="form-control" name="manager" required>
                                <option value="">Choose Manager</option>
                                <option value="1">Tinashe</option>
                                <option value="2">Kerita</option>
                                </select>
                            </div>
                            </div>

                            <div class="col-lg-3 col-sm-6 col-12">
                                <div class="form-group">
                                <label>Role</label>
                                <select class="form-control" name="emp_role" required>
                                    <option value="">Select Role</option>
                                        <option value="1">Admin or Superuser</option>
                                        <option value="2">Manager/Supervisor</option>
                                        <option value="3">Employee/User</option>
                                        <option value="4">Finance/User</option>
                                        <option value="5">Inventory Controller</option>
                                        <option value="6">Sales/User</option>
                                        <option value="7">Purchase/User</option>
                                        <option value="8">HR/User</option>
                                        <option value="9">Production/User</option>
                                        <option value="10">Customer/User</option>
                                        <option value="11">Vendor/User</option>
                                        <option value="12">Data Analyst/Reporting User</option>
                                        <option value="13">Auditor/Compliance User</option>
                                        <option value="14">IT Administrator</option>
                                      </select>                                      
                                </div>
                                </div>

                                
                                <div class="col-lg-3 col-sm-6 col-12">
                                    <div class="form-group">
                                    <label>Employee ID</label>
                                    <input type="number" class="form-control" name="emp_id" required>
                                    </div>
                                    </div>

                                <div class="col-lg-3 col-sm-6 col-12">
                                    <div class="form-group">
                                    <label>Password</label>
                                    <input type="password" id="password" name="pwd" required>
                                    </div>
                                    </div>
                                    <div class="col-lg-3 col-sm-6 col-12">
                                        <div class="form-group">
                                        <label>Confirm Password</label>
                                        <input type="password" id="confirmPassword" name="confirm_pwd" required>
                                        </div>
                                        </div>


                                            <div class="col-lg-6 col-sm-12 col-12">
                                                <div class="form-group">
                                                <label>Profile Picture</label>
                                                <input type="file" class="form-control" value="" aria-label="file example" name="profile_img" >
                                                <div class="invalid-feedback">Please upload a valid profile .</div>
                                                </div>
                                                </div>

-->
{{form}}
<div class="col-lg-12">
    <button type="submit" class="btn btn-submit me-2">Create Account</button>
    <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
</div>
</div>
</form>
</div>
</div>




<script>
  var mobileInput = document.getElementById("mobile");
  var mobileError = document.getElementById("mobileError");

  mobileInput.addEventListener("input", function() {
    // Get the input value
    var inputValue = this.value;

    // Define a regular expression pattern to match only numbers and the plus symbol
    var pattern = /^[0-9+]+$/;

    // Test if the input matches the pattern
    if (!pattern.test(inputValue)) {
      // Display an error message
      mobileError.textContent = "Please enter a valid mobile number (numbers and + symbol only).";
      // Remove invalid characters from the input
      this.value = inputValue.replace(/[^0-9+]/g, '');
    } else {
      // Clear any error message
      mobileError.textContent = "";
    }
  });

  function validateForm() {
    var password = document.getElementById("password").value;
    var confirmPassword = document.getElementById("confirmPassword").value;
  
    if (password !== confirmPassword) {
      alert("Passwords do not match. Please try again.");
      document.getElementById("password").classList.add("highlight");
      document.getElementById("confirmPassword").classList.add("highlight");
      return false; // Prevent form submission
    }
  
    return true; // Allow form submission
  }
</script>


{% endblock %}